# Реализация побега от монстров и надежного респавна

## Проблема
1.  **Респавн**: Текущая логика респавна может быть ненадежной. Пользователь хочет гарантий, что бот воскреснет.
2.  **Побег**: Бот просто "отходит" на 10 блоков, часто упираясь в стены или падая в ямы. Он не ищет *безопасное* место.

## Решение

### 1. Умный побег (Smart Flee)
В `api/bot/survival.ts`:
-   Заменить примитивную логику "отойти назад" на поиск реальной точки для отступления.
-   **Алгоритм**:
    1.  Вычислить вектор от врага.
    2.  Проверить несколько точек в этом направлении (веером), чтобы найти твердый блок, на который можно встать.
    3.  Если тупик — бежать в случайную сторону, лишь бы подальше.
    4.  Включить **спринт** при побеге.
-   Объединить логику `handleLowHealth` и `handleThreat`: если здоровья мало, бот должен убегать от любого врага в радиусе видимости.

### 2. Надежный респавн
В `api/bot/index.ts`:
-   Добавить дублирующий вызов `bot.respawn()` (если поддерживается версией).
-   Убедиться, что при смерти сбрасываются все задачи (`pathfinder`, `pvp`, `autoEat`), чтобы бот не пытался бежать, будучи мертвым.

## Шаги реализации
1.  **`api/bot/survival.ts`**:
    -   Реализовать метод `findEscapePos(enemyPos)`.
    -   Обновить `handleThreat` и `handleLowHealth`.
    -   Включить спринт при побеге.
2.  **`api/bot/index.ts`**:
    -   Усилить функцию `tryRespawn`.

Это сделает бота более живучим: он будет активно убегать и прятаться, а если умрет — гарантированно вернется.
