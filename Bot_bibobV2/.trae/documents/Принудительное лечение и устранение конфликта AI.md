# Устранение конфликта задач и ручное питание

## Проблема
Бот находится в состоянии "гонки" (race condition) между модулем выживания (хочет есть) и модулем исследования (хочет бегать). Из-за этого он дергается, спамит логами и не может выполнить ни одно действие. Плагин `autoEat` не срабатывает из-за постоянных переключений.

## Решение

### 1. Жесткий приоритет выживания
В `api/bot/decision.ts`:
- Если здоровье < 6 или голод < 6, **принудительно останавливать** `exploration` и блокировать любые другие действия, пока состояние не нормализуется.

### 2. Ручное питание (Fallback)
В `api/bot/survival.ts`:
- Добавить метод `forceEat()`.
- Если плагин `autoEat` не начал есть в течение 2 секунд после обнаружения голода, бот должен:
    1. Найти еду.
    2. Взять её в руку (`bot.equip`).
    3. Использовать (`bot.consume`), глядя вниз или в воздух.

### 3. Исправление ExplorationModule
В `api/bot/exploration.ts`:
- Добавить проверку в начале цикла: если задача сменилась на `survival_emergency`, немедленно прерывать цикл (`break`).

## Шаги реализации
1.  **`api/bot/decision.ts`**: Добавить блокировку исследования при низком HP.
2.  **`api/bot/survival.ts`**: Реализовать `forceEat` с использованием `bot.consume`.
3.  **`api/bot/exploration.ts`**: Улучшить проверку смены задач.

Это заставит бота остановиться, поесть и только потом продолжить дела.
