# Улучшение стабильности, добычи дерева и крафта

## Проблемы
1.  **Таймауты WebSocket**: Ошибки `client timed out after 30000 milliseconds` указывают на нестабильность соединения с фронтендом или проблемы с heartbeat.
2.  **Неполная добыча дерева**: Бот ломает дерево, но не подбирает весь лут, оставляя блоки.
3.  **Хаотичное движение**: Бот мечется, вместо того чтобы уверенно идти к цели.
4.  **Еда**: Не ест, даже имея еду.
5.  **Крафт**: Нужно научить ставить верстак и делать инструменты.

## Решение

### 1. Стабильность соединения (WebSocket)
- Увеличить таймаут для WebSocket клиента или добавить "пинг-понг" механизм для поддержания активности соединения, чтобы избежать `timed out`.

### 2. Умная добыча дерева
- В `api/bot/decision.ts` улучшить функцию `gatherResource`. Вместо простого `collectBlock`, нужно:
    - Найти ближайшее дерево.
    - Подойти к нему.
    - Ломать все блоки дерева (включая верхние).
    - **ОБЯЗАТЕЛЬНО** подождать и собрать весь выпавший дроп (saplings, apples, logs).

### 3. Крафт инструментов
- Добавить логику в `DecisionEngine`:
    - Поставить верстак (найти место, поставить блок).
    - Скрафтить палки.
    - Скрафтить деревянную кирку.
    - Скрафтить каменную кирку (после добычи камня).

### 4. Стабилизация движения
- В `ExplorationModule` уже внедрена спираль, но нужно добавить проверку: если бот идет к цели (дерево/еда), он не должен отвлекаться на "исследование" пока не закончит задачу.

## Шаги реализации
1.  **`api/bot/index.ts`**: Настроить heartbeat для WebSocket.
2.  **`api/bot/decision.ts`**:
    - Переписать `gatherResource` для полного сбора дерева.
    - Реализовать функцию `placeBlock` для верстака.
    - Добавить рецепты для палок и кирок.
3.  **`api/bot/index.ts` (AutoEat)**: Проверить еще раз настройки `startAt` и `priority`, возможно, порог слишком низок.

